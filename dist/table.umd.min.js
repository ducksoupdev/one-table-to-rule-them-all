!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var e="abcdefghijklmnopqrstuvwxyz",i=e+e.toUpperCase()+"1234567890";function l(e){return"".concat(e?e+"-":"").concat(function(){for(var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8,a="",r=0;r<t;r++)a+=(e=i)[Math.floor(Math.random()*e.length)];return a}())}var u=9007199254740991,d="[object Arguments]",c="[object Function]",f="[object GeneratorFunction]",t="object"==("undefined"==typeof global?"undefined":y(global))&&global&&global.Object===Object&&global,a="object"==("undefined"==typeof self?"undefined":y(self))&&self&&self.Object===Object&&self,p=t||a||Function("return this")();function h(e,t){for(var a=-1,r=t.length,n=e.length;++a<r;)e[n+a]=t[a];return e}var m=Object.prototype,g=m.hasOwnProperty,b=m.toString,v=p.Symbol,P=m.propertyIsEnumerable,x=v?v.isConcatSpreadable:void 0;function w(e){return S(e)||!!(p=a=t=e)&&"object"==y(p)&&(null!=(r=a)&&("number"==typeof(l=r.length)&&-1<l&&l%1==0&&l<=u)&&(i=y(s=n=r),!((o=!s||"object"!=i&&"function"!=i?"":b.call(n))==c||o==f)))&&g.call(t,"callee")&&(!P.call(t,"callee")||b.call(t)==d)||!!(x&&e&&e[x]);var t,a,r,n,o,s,i,l,p}function k(e){return(e?e.length:0)?function e(t,a,r,n,o){var s=-1,i=t.length;for(r||(r=w),o||(o=[]);++s<i;){var l=t[s];0<a&&r(l)?1<a?e(l,a-1,r,n,o):h(o,l):n||(o[o.length]=l)}return o}(e,1):[]}var S=Array.isArray;var C=9007199254740991,j="[object Arguments]",O="[object Function]",z="[object GeneratorFunction]",I=/^(?:0|[1-9]\d*)$/;function N(e,t){for(var a=-1,r=e?e.length:0;++a<r&&!1!==t(e[a],a,e););return e}var E,A,R=Object.prototype,q=R.hasOwnProperty,T=R.toString,H=R.propertyIsEnumerable,M=(E=Object.keys,A=Object,function(e){return E(A(e))});function L(e,t){var a,r,n,o=J(e)||(n=r=a=e)&&"object"==y(n)&&K(r)&&q.call(a,"callee")&&(!H.call(a,"callee")||T.call(a)==j)?function(e,t){for(var a=-1,r=Array(e);++a<e;)r[a]=t(a);return r}(e.length,String):[],s=o.length,i=!!s;for(var l in e)!t&&!q.call(e,l)||i&&("length"==l||U(l,s))||o.push(l);return o}var F,V,D,G=(F=function(e,t){return e&&$(e,t,Q)},function(e,t){if(null==e)return e;if(!K(e))return F(e,t);for(var a=e.length,r=V?a:-1,n=Object(e);(V?r--:++r<a)&&!1!==t(n[r],r,n););return e}),$=function(e,t,a){for(var r=-1,n=Object(e),o=a(e),s=o.length;s--;){var i=o[D?s:++r];if(!1===t(n[i],i,n))break}return e};function B(e){if(a=(t=e)&&t.constructor,r="function"==typeof a&&a.prototype||R,t!==r)return M(e);var t,a,r,n=[];for(var o in Object(e))q.call(e,o)&&"constructor"!=o&&n.push(o);return n}function U(e,t){return!!(t=null==t?C:t)&&("number"==typeof e||I.test(e))&&-1<e&&e%1==0&&e<t}var J=Array.isArray;function K(e){return null!=e&&("number"==typeof(o=e.length)&&-1<o&&o%1==0&&o<=C)&&(n=y(r=t=e),!((a=!r||"object"!=n&&"function"!=n?"":T.call(t))==O||a==z));var t,a,r,n,o}function Q(e){return K(e)?L(e):B(e)}function W(e){return e}var X=function(e,t){var a,r,n=document.createElement(e);for(var o in t)if("on"===o.slice(0,2)){var s=o.slice(2),i=t[o];if(null==i)continue;n.addEventListener(s,i)}else if(-1<["disabled","autocomplete","selected","checked"].indexOf(o))t[o]&&n.setAttribute(o,o);else{if(null==t[o])continue;n.setAttribute(o,t[o])}for(var l=arguments.length,p=new Array(2<l?l-2:0),u=2;u<l;u++)p[u-2]=arguments[u];return 0===p.length||(a=k(p),r=function(e){e instanceof Node?n.appendChild(e):n.appendChild(document.createTextNode(e))},(J(a)?N:G)(a,"function"==typeof r?r:W)),n},Y=function(t){return X("tr",null,Object.keys(t).map(function(e){return X("td",null,t[e])}))},Z=function(){function e(){r(this,e),this.classes=[]}return o(e,[{key:"addClass",value:function(e){return this.classes.push(e),this}},{key:"build",value:function(){return this.classes.join(" ")}}]),e}(),_=function(e){return X("table",{class:"table ".concat((r=e,n=new Z,r.striped&&n.addClass("table-striped"),r.bordered&&n.addClass("table-bordered"),r.dark&&n.addClass("table-dark"),r.hover&&n.addClass("table-hover"),n.build()))},(a=e).headClassName?X("thead",{class:a.headClassName}):X("thead",null),X("tbody",null),e.footers?(t=e).footClassName?X("tfoot",{class:t.footClassName}):X("tfoot",null):"");var t,a,r,n},ee=function(e){return X("div",{class:"mb-2 w-25"},X("span",{class:"mr-1"},"Display"),X("select",{class:"form-control d-inline-block w-auto",size:"1"},X("option",{value:"10",selected:10===e.pageSize},"10"),X("option",{value:"25",selected:25===e.pageSize},"25"),X("option",{value:"50",selected:50===e.pageSize},"50")),X("span",{class:"ml-1"},"rows"))},te=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return X("tr",null,X("td",s({colspan:e},t),a))};function ae(e,t){return t&&t.title||e}var re=function(e,t,a){return e?X("div",null,ae(t,a[t])):ae(t,a[t])},ne=function(t,a,e){return X("tr",null,e.map(function(e){return X("th",null,re(t,e,a))}))},oe=function(t,a,e){return X("tr",null,e.map(function(e){return X("th",null,re(t,e,a))}))},se=function(t){return X("div",{class:"row"},X("div",{class:"col-sm"},X("div",{class:"pagination-info mb-2"},t.info)),X("div",{class:"col-sm"},X("ul",{class:"pagination mb-0 float-right"},X("li",{class:"page-item".concat(t.isTherePreviousPage?"":" disabled")},X("a",{class:"page-link previous-link",href:"#",tabindex:t.isTherePreviousPage?0:-1,"aria-label":"Previous"},"Previous")),t.pageIndices.map(function(e){return X("li",{class:"page-item".concat(e===t.currentPageIndex?" active":"")},X("a",{class:"page-link goto-link",href:"#","data-page-index":t.pageIndex,"data-goto-page-index":e},e+1))}),X("li",{class:"page-item".concat(t.isThereNextPage?"":" disabled")},X("a",{class:"page-link next-link",href:"#",tabindex:t.isThereNextPage?0:-1,"aria-label":"Next"},"Next")))))},ie=function(e){return X("nav",{"aria-label":"Table pagination",class:"pagination-container mb-3 clearfix"},se(e))},le=function(e){return e.fixedHeight?X("div",{class:"tfh-c tfh-h tfh-f".concat((t=e).footers?" mb-3":"")},X("div",{class:"tfh"},_(t))):_(e);var t},pe=function(){function t(e){r(this,t),this.state={striped:!1,dark:!1,bordered:!1,hover:!1,fixedHeight:!1,headers:!0,headClassName:null,footers:!1,footClassName:null,displayedEntries:!1,pageIndex:0,pageSize:50,visiblePageCount:4,firstVisiblePageIndex:0,pr:null,rows:null,tableRendered:!1,headRendered:!1,footRendered:!1,paginationRendered:!1,displayedEntriesRendered:!1},this.observers=[],Object.assign(this.state,e),e.data&&"object"===y(e.data)&&this.createNodes(e.data)}return o(t,[{key:"registerObserver",value:function(e){this.observers.push(e)}},{key:"setState",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];Object.assign(this.state,e),e.data&&"object"===y(e.data)&&this.createNodes(e.data),t&&this.notifyObservers()}},{key:"notifyObservers",value:function(){var t=this;this.observers.forEach(function(e){return e.update(t)})}},{key:"createNodes",value:function(e){this.state.pr={},this.state.rows=[],e.rows.length>this.state.pageSize&&e.rows.length<50&&(this.state.pageSize=e.rows.length);for(var t=0;t<e.rows.length;t++){var a=e.rows[t],r={id:l(),data:a};this.state.rows.push(r),this.state.pr[r.id]=Y(a)}}}]),t}(),ue=function e(t,a,r,n,o){var s=null,i=0;if(!t||"object"!==y(t)||Array.isArray(t))return e.errors=[{keyword:"type",dataPath:(a||"")+"",schemaPath:"#/type",params:{type:"object"},message:"should be object"}],!1;var l=!0;if(void 0===t.striped)l=!0;else{var p=i;if("boolean"!=typeof t.striped)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".striped",schemaPath:"#/properties/striped/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===t.dark)l=!0;else{if(p=i,"boolean"!=typeof t.dark)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".dark",schemaPath:"#/properties/dark/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===t.bordered)l=!0;else{if(p=i,"boolean"!=typeof t.bordered)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".bordered",schemaPath:"#/properties/bordered/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===t.hover)l=!0;else{if(p=i,"boolean"!=typeof t.hover)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".hover",schemaPath:"#/properties/hover/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===t.fixedHeight)l=!0;else{if(p=i,"boolean"!=typeof t.fixedHeight)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".fixedHeight",schemaPath:"#/properties/fixedHeight/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===t.headers)l=!0;else{if(p=i,"boolean"!=typeof t.headers)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".headers",schemaPath:"#/properties/headers/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===t.headClassName)l=!0;else{if(p=i,"string"!=typeof t.headClassName)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".headClassName",schemaPath:"#/properties/headClassName/type",params:{type:"string"},message:"should be string"}]);l=i===p}if(l){if(void 0===t.footers)l=!0;else{if(p=i,"boolean"!=typeof t.footers)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".footers",schemaPath:"#/properties/footers/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===t.footClassName)l=!0;else{if(p=i,"string"!=typeof t.footClassName)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".footClassName",schemaPath:"#/properties/footClassName/type",params:{type:"string"},message:"should be string"}]);l=i===p}if(l){if(void 0===t.displayedEntries)l=!0;else{if(p=i,"boolean"!=typeof t.displayedEntries)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".displayedEntries",schemaPath:"#/properties/displayedEntries/type",params:{type:"boolean"},message:"should be boolean"}]);l=i===p}if(l){if(void 0===(u=t.schema))return l=!1,!(e.errors=[{keyword:"required",dataPath:(a||"")+"",schemaPath:"#/required",params:{missingProperty:"schema"},message:"should have required property 'schema'"}]);if(p=i,!u||"object"!==y(u)||Array.isArray(u))return!(e.errors=[{keyword:"type",dataPath:(a||"")+".schema",schemaPath:"#/properties/schema/type",params:{type:"object"},message:"should be object"}]);if(l=i===p){if(void 0===(u=t.pageIndex))l=!0;else{if(p=i,"number"!=typeof u||u%1||u!=u)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".pageIndex",schemaPath:"#/properties/pageIndex/type",params:{type:"integer"},message:"should be integer"}]);if("number"==typeof u&&(u<0||u!=u))return!(e.errors=[{keyword:"minimum",dataPath:(a||"")+".pageIndex",schemaPath:"#/properties/pageIndex/minimum",params:{comparison:">=",limit:0,exclusive:!1},message:"should be >= 0"}]);l=i===p}if(l){var u;if(void 0===(u=t.pageSize))l=!0;else{var d,c=p=i,f=!1,h=(l=!1,null),m=i;if("number"!=typeof u||u%1||u!=u){var g={keyword:"type",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/0/type",params:{type:"integer"},message:"should be integer"};null===s?s=[g]:s.push(g),i++}if("number"==typeof u&&(10<u||u!=u?(g={keyword:"maximum",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/0/maximum",params:{comparison:"<=",limit:10,exclusive:!1},message:"should be <= 10"},null===s?s=[g]:s.push(g),i++):(u<10||u!=u)&&(g={keyword:"minimum",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/0/minimum",params:{comparison:">=",limit:10,exclusive:!1},message:"should be >= 10"},null===s?s=[g]:s.push(g),i++)),(d=i===m)&&(l=f=!0,h=0),m=i,("number"!=typeof u||u%1||u!=u)&&(g={keyword:"type",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/1/type",params:{type:"integer"},message:"should be integer"},null===s?s=[g]:s.push(g),i++),"number"==typeof u&&(25<u||u!=u?(g={keyword:"maximum",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/1/maximum",params:{comparison:"<=",limit:25,exclusive:!1},message:"should be <= 25"},null===s?s=[g]:s.push(g),i++):(u<25||u!=u)&&(g={keyword:"minimum",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/1/minimum",params:{comparison:">=",limit:25,exclusive:!1},message:"should be >= 25"},null===s?s=[g]:s.push(g),i++)),(d=i===m)&&f)l=!1,h=[h,1];else d&&(l=f=!0,h=1),m=i,("number"!=typeof u||u%1||u!=u)&&(g={keyword:"type",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/2/type",params:{type:"integer"},message:"should be integer"},null===s?s=[g]:s.push(g),i++),"number"==typeof u&&(50<u||u!=u?(g={keyword:"maximum",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/2/maximum",params:{comparison:"<=",limit:50,exclusive:!1},message:"should be <= 50"},null===s?s=[g]:s.push(g),i++):(u<50||u!=u)&&(g={keyword:"minimum",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf/2/minimum",params:{comparison:">=",limit:50,exclusive:!1},message:"should be >= 50"},null===s?s=[g]:s.push(g),i++)),(d=i===m)&&f?(l=!1,h=[h,2]):d&&(l=f=!0,h=2);if(!l)return g={keyword:"oneOf",dataPath:(a||"")+".pageSize",schemaPath:"#/properties/pageSize/oneOf",params:{passingSchemas:h},message:"should match exactly one schema in oneOf"},null===s?s=[g]:s.push(g),i++,e.errors=s,!1;i=c,null!==s&&(c?s.length=c:s=null),l=i===p}if(l)if(void 0===(u=t.visiblePageCount))l=!0;else{if(p=i,"number"!=typeof u||u%1||u!=u)return!(e.errors=[{keyword:"type",dataPath:(a||"")+".visiblePageCount",schemaPath:"#/properties/visiblePageCount/type",params:{type:"integer"},message:"should be integer"}]);if("number"==typeof u&&(u<4||u!=u))return!(e.errors=[{keyword:"minimum",dataPath:(a||"")+".visiblePageCount",schemaPath:"#/properties/visiblePageCount/minimum",params:{comparison:">=",limit:4,exclusive:!1},message:"should be >= 4"}]);l=i===p}}}}}}}}}}}}}return e.errors=s,0===i};ue.schema={$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{striped:{type:"boolean"},dark:{type:"boolean"},bordered:{type:"boolean"},hover:{type:"boolean"},fixedHeight:{type:"boolean"},headers:{type:"boolean"},headClassName:{type:"string"},footers:{type:"boolean"},footClassName:{type:"string"},displayedEntries:{type:"boolean"},schema:{type:"object"},pageIndex:{type:"integer",minimum:0},pageSize:{oneOf:[{type:"integer",minimum:10,maximum:10},{type:"integer",minimum:25,maximum:25},{type:"integer",minimum:50,maximum:50}]},visiblePageCount:{type:"integer",minimum:4}},required:["schema"]};var de=ue.errors=null,ce=null;function fe(e){return{info:(t=e.pageSize,a=e.pageIndex,r=e.rows.length,n={firstOnPage:0===r?0:a*t+1,lastOnPage:Math.min(r,(a+1)*t),total:r},"Showing entries ".concat(n.firstOnPage,"-").concat(n.lastOnPage," of ").concat(n.total)),pageIndex:e.pageIndex,isTherePreviousPage:he(),isThereNextPage:me(),pageIndices:function(e,t,a){for(var r=[],n=e;n<t&&(r.push(n),!(r.length>=a));n++);return r}(e.firstVisiblePageIndex,e.rows.length,e.visiblePageCount),currentPageIndex:e.pageIndex};var t,a,r,n}function he(){return 0<ce.state.pageIndex}function me(){return ce.state.pageIndex+1<(e=ce.state.rows.length,t=ce.state.pageSize,Math.floor(e/t)+Math.sign(e%t));var e,t}function ge(){he()&&ve(ce.state.pageIndex-1)}function ye(){me()&&ve(ce.state.pageIndex+1)}function be(e){var t=Number(e.target.dataset.pageIndex),a=Number(e.target.dataset.gotoPageIndex);a!==t&&ve(a)}function ve(e){var t=ce.state.firstVisiblePageIndex;e<t&&(t=e),e>=t+ce.state.visiblePageCount&&(t=Math.max(e-ce.state.visiblePageCount+1,0)),ce.setState({pageIndex:e,firstVisiblePageIndex:t})}function Pe(e,t){var a=e.querySelector(".previous-link"),r=e.querySelector(".next-link"),n=e.querySelectorAll(".goto-link");t.isTherePreviousPage&&a.addEventListener("click",ge),t.isThereNextPage&&r.addEventListener("click",ye),n.forEach(function(e){return e.addEventListener("click",be)})}function xe(e,t){if(t.state.rows&&t.state.rows.length>t.state.pageSize)if(t.state.paginationRendered)r=fe(t.state),Pe(n=se(r),r),de.textContent="",de.appendChild(n);else{var a=(o=fe((ce=t).state),Pe(de=ie(o),o),de);e.appendChild(a),t.setState({paginationRendered:!0},!1)}var r,n,o}function we(e,t){if(t.state.displayedEntries||t.state.rows&&50<t.state.rows.length){var a=ee(t.state);a.querySelector("select").addEventListener("change",function(e){t.setState({pageSize:Number(e.target.value),pageIndex:0})}),e.insertBefore(a,e.firstChild),t.setState({displayedEntriesRendered:!0},!1)}}function ke(e,t){var a,r,n;console.time("render"),t.state.tableRendered||(a=e,n=le((r=t).state),a.textContent="",a.appendChild(n),r.setState({tableRendered:!0},!1)),t.state.headRendered||function(e,t){if(t.state.headers){var a=e.querySelector("thead");a&&(a.textContent="",a.appendChild(ne(t.state.fixedHeight,t.state.schema.properties,Object.keys(t.state.schema.properties))),we(e,t),t.setState({headRendered:!0},!1))}}(e,t),t.state.displayedEntriesRendered||we(e,t),t.state.footRendered||function(e,t){if(t.state.footers){var a=e.querySelector("tfoot");a&&(a.textContent="",a.appendChild(oe(t.state.fixedHeight,t.state.schema.properties,Object.keys(t.state.schema.properties))),t.setState({footRendered:!0},!1))}}(e,t),xe(e,t),function(e,t){var a=e.querySelector("tbody");if(t.state.rows&&Array.isArray(t.state.rows)){var r=0===t.state.pageIndex?0:t.state.pageIndex*t.state.pageSize,n=Math.min(t.state.rows.length,(t.state.pageIndex+1)*t.state.pageSize),o=t.state.rows.slice(r,n).map(function(e){return t.state.pr[e.id]});a.textContent="",o.forEach(function(e){return a.appendChild(e)})}else a.textContent="",a.appendChild(te(Object.keys(t.state.schema.properties).length,{class:"text-center"},"Loading..."))}(e,t),console.timeEnd("render")}var Se=function(){function a(e,t){r(this,a),function(e){var t=ue(e),a=e.data&&"function"==typeof e.data;if(!t||!a)throw console.error(ue.errors),new Error("Invalid options supplied!")}(t),this.element=e,this.store=new pe(t),this.store.registerObserver(this),this.render(),function(t){var e=t.state.data();if(!e||"object"!==y(e)&&"function"!=typeof e||"function"!=typeof e.then){if(!e||"object"!==y(e))throw new Error("Data is not a Promise or object!");t.setState({data:e})}else e.then(function(e){return t.setState({data:e})})}(this.store)}return o(a,[{key:"update",value:function(){this.render()}},{key:"render",value:function(){ke(this.element,this.store)}}]),a}();window.mosaic=window.mosaic||{},window.mosaic.Table=Se});
